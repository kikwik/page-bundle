<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services
        http://symfony.com/schema/dic/services/services-1.0.xsd">
    <services>

        <!-- Repository\PageRepository -->
        <service id="kikwik_page.repository.page_repository" class="Kikwik\PageBundle\Repository\PageRepository">
            <tag name="doctrine.repository_service" />
            <argument type="service" id="doctrine"/>
        </service>
        <service id="Kikwik\PageBundle\Repository\PageRepository" alias="kikwik_page.repository.page_repository" public="true"/>

        <!-- Repository\PageTranslationRepository -->
        <service id="kikwik_page.repository.page_translation_repository" class="Kikwik\PageBundle\Repository\PageTranslationRepository">
            <tag name="doctrine.repository_service" />
            <argument type="service" id="doctrine"/>
        </service>
        <service id="Kikwik\PageBundle\Repository\PageTranslationRepository" alias="kikwik_page.repository.page_translation_repository" public="true"/>

        <!-- Repository\BlockRepository -->
        <service id="kikwik_page.repository.block_repository" class="Kikwik\PageBundle\Repository\BlockRepository">
            <tag name="doctrine.repository_service" />
            <argument type="service" id="doctrine"/>
        </service>
        <service id="Kikwik\PageBundle\Repository\BlockRepository" alias="kikwik_page.repository.block_repository" public="true"/>




        <!-- Routing\PageTranslationRouteProvider -->
        <service id="kikwik_page.routing.page_translation_route_provider" class="Kikwik\PageBundle\Routing\PageTranslationRouteProvider">
            <tag name="routing.route_provider"/>
            <argument type="service" id="doctrine"/>
        </service>



        <!-- Controller\PageController -->
        <service id="kikwik_page.controller.page_controller" class="Kikwik\PageBundle\Controller\PageController">
            <tag name="controller.service_arguments"/>
            <argument type="service" id="twig"/>
        </service>

        <!-- Controller\AdminController -->
        <service id="kikwik_page.controller.admin_controller" class="Kikwik\PageBundle\Controller\AdminController">
            <tag name="controller.service_arguments"/>
            <argument type="service" id="twig"/>
            <argument type="service" id="cmf_routing.router"/>
            <argument type="service" id="doctrine"/>
            <argument type="service" id="kikwik_page.repository.page_repository"/>
            <argument type="service" id="form.factory"/>
            <argument type="service" id="request_stack"/>
            <argument type="service" id="security.authorization_checker"/>
        </service>

        <!-- Service\BlockComponentProvider -->
        <service id="kikwik_page.service.block_component_provider" class="Kikwik\PageBundle\Service\BlockComponentProvider">
            <argument type="service" id="service_container"/>
            <argument type="tagged_iterator" tag="twig.component"/>
        </service>

        <!-- Form\BlockComponentChoiceType -->
        <service id="kikwik_page.form.block_component_choice_type" class="Kikwik\PageBundle\Form\BlockComponentChoiceType">
            <tag name="form.type"/>
            <argument type="service" id="kikwik_page.service.block_component_provider"/>
        </service>

        <!-- Form\BlockFormType -->
        <service id="kikwik_page.form.block_form_type" class="Kikwik\PageBundle\Form\BlockFormType">
            <tag name="form.type"/>
            <argument type="service" id="kikwik_page.service.block_component_provider"/>
        </service>


        <!-- Twig\Components\AdminBar -->
        <service id="kikwik_page.twig_components.admin_bar" class="Kikwik\PageBundle\Twig\Components\AdminBar">
            <tag name="twig.component"/>
            <argument type="service" id="request_stack"/>
            <argument type="service" id="security.authorization_checker"/>
        </service>

        <!-- Twig\Components\LocaleSwitcher -->
        <service id="kikwik_page.twig_components.locale_switcher" class="Kikwik\PageBundle\Twig\Components\LocaleSwitcher">
            <tag name="twig.component"/>
            <argument type="service" id="request_stack"/>
        </service>

    </services>
</container>